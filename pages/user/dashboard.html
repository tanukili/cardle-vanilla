<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/assets/images/logo.svg" type="image/x-icon" />
    <title>Cardle</title>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- 導覽列 -->
    <%- include('./layout/header'); -%>
    <main class="flex-grow-1">
      <section class="text-center pt-20 pb-14" style="background-color: #fafafa">
        <div class="container">
          <h2 class="fs-xl mb-4">
            哈囉！<span class="badge badge-lg badge-secondary fs-xl mx-2 lh-base">Jennie</span>！
          </h2>
          <h1 class="fs-2xl mb-13">今天有任何靈感嗎？</h1>
          <nav class="nav nav-underline justify-content-center mb-10">
            <div class="nav-item d-flex" id="dashboard-nav-tab" role="tablist">
              <button
                class="nav-link mx-3 d-flex align-items-center active"
                id="nav-add-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-add"
                type="button"
                role="tab"
                aria-controls="nav-home"
                aria-selected="true"
              >
                <span class="material-symbols-outlined me-4"> edit_square </span>
                新增卡片
              </button>
              <button
                class="nav-link mx-3 d-flex align-items-center"
                id="nav-search-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-search"
                type="button"
                role="tab"
                aria-controls="nav-profile"
                aria-selected="false"
              >
                <span class="material-symbols-outlined me-4"> search </span>
                搜尋卡片
              </button>
            </div>
          </nav>
          <form class="">
            <div class="tab-content mb-10">
              <div
                class="tab-pane fade show active"
                id="nav-add"
                role="tabpanel"
                aria-labelledby="nav-add-tab"
                tabindex="0"
              >
                <textarea
                  class="form-control dashboard-textarea"
                  id="addCardTextarea"
                  placeholder="請輸入要新增卡片的內容"
                ></textarea>
              </div>
              <div class="tab-pane fade" id="nav-search" role="tabpanel" aria-labelledby="nav-search-tab" tabindex="0">
                <textarea
                  class="form-control dashboard-textarea"
                  id="searchCardTextarea"
                  placeholder="請輸入要搜尋卡片的內容"
                ></textarea>
              </div>
            </div>
            <button class="btn btn-primary w-100" type="submit">新增</button>
          </form>
        </div>
      </section>
      <section class="pt-14 pb-6">
        <div class="container">
          <h2 class="fs-xl lh-base mb-8 pb-6 border-bottom border-gray-200 d-flex align-items-center">
            學習狀態分析
            <a
              class="lh-1"
              data-bs-toggle="collapse"
              href="#collapseExample"
              role="button"
              aria-expanded="false"
              aria-controls="collapseExample"
            >
              <span class="material-symbols-outlined ms-2"> keyboard_arrow_down </span>
            </a>
          </h2>
        </div>
        <div class="collapse show" id="collapseExample">
          <!-- 圓餅圖 -->
          <div class="container">
            <div class="card bg-gray-0 border-primary-100 rounded-4 mb-8">
              <div class="card-body d-flex flex-column">
                <h3 class="fs-l lh-base fw-normal text-primary-900 mb-4">本月學習主題</h3>
                <div class="mx-auto my-3" style="width: 180px; height: 180px">
                  <canvas id="themePie"></canvas>
                </div>
                <ul class="list-unstyled mx-6 mb-0 row gx-4 gy-2">
                  <li class="col-6">
                    <p class="d-flex align-items-center fs-s text-gray-700">
                      <span class="d-block bg-secondary-500 rounded-circle me-2" style="width: 8px; height: 8px"></span
                      >網頁切板: 70%
                    </p>
                  </li>
                  <li class="col-6">
                    <p class="d-flex align-items-center fs-s text-gray-700">
                      <span
                        class="d-block rounded-circle me-2"
                        style="width: 8px; height: 8px; background-color: #ff9e69"
                      ></span
                      >JavaScrip: 20%
                    </p>
                  </li>
                  <li class="col-6">
                    <p class="d-flex align-items-center fs-s text-gray-700">
                      <span
                        class="d-block rounded-circle me-2"
                        style="width: 8px; height: 8px; background-color: #fed0a7"
                      ></span
                      >料理基礎: 10%
                    </p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- 長條圖 -->
          <div class="overflow-scroll scrollbar-none container mb-8">
            <div class="card bg-gray-0 border-primary-100 rounded-4" style="min-width: 662px">
              <div class="card-title p-4 mb-0">
                <h3 class="fs-l lh-base fw-normal text-primary-900">學習時間 (分)</h3>
              </div>
              <div class="card-body d-flex flex-column">
                <canvas id="spendTimeBar" style="height: 221px"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="container py-14">
        <h2 class="fs-xl mb-8 pb-6 border-bottom border-gray-200">學習進度追蹤</h2>
        <div class="scrollbar-none w-100 overflow-scroll mb-8">
          <nav class="nav nav-pills nav-fill gap-6" style="width: max-content">
            <a class="nav-link border border-primary active" aria-current="page" href="#">顯示全部</a>
            <a class="nav-link border border-primary d-flex align-items-center" href="#"
              ><span class="material-symbols-outlined me-3"> book </span>讀書筆記</a
            >
            <a class="nav-link border border-primary d-flex align-items-center" href="#"
              ><span class="material-symbols-outlined me-3"> live_tv </span>線上課程</a
            >
            <a class="nav-link border border-primary d-flex align-items-center" aria-disabled="true"
              ><span class="material-symbols-outlined me-3"> music_video </span>Podcast</a
            >
          </nav>
        </div>
        <ul class="list-unstyled d-flex flex-column gap-6">
          <li>
            <div class="card rounded-4 bg-gray-0 border-gray-200">
              <div class="card-body">
                <h3 class="fs-m fw-normal d-flex align-items-center mb-4">
                  <span class="material-symbols-outlined text-gray-600 me-3"> book </span>
                  <span class="lh-base text-dark text-truncate">金魚都能懂的CSS 必學屬性：網頁設計必備寶典</span>
                </h3>
                <div class="d-flex align-items-center">
                  <div
                    class="progress flex-grow-1"
                    role="progressbar"
                    aria-label="learning-progress"
                    aria-valuenow="50"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    <div class="progress-bar w-50"></div>
                  </div>
                  <small class="text-gray-700 text-end ms-1" style="width: 37px">50%</small>
                  <button class="btn btn-outline-primary d-flex align-items-center p-2 ms-4" type="button">
                    <span class="material-symbols-outlined"> edit_square </span>
                  </button>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="card rounded-4 bg-gray-0 border-gray-200">
              <div class="card-body">
                <h3 class="fs-m fw-normal d-flex align-items-center mb-4">
                  <span class="material-symbols-outlined text-gray-600 me-3"> book </span>
                  <span class="lh-base text-dark text-truncate"
                    >看完這本就會懂！無痛攻克 JavaScript 面試必考觀念與技巧</span
                  >
                </h3>
                <div class="d-flex align-items-center">
                  <div
                    class="progress flex-grow-1"
                    role="progressbar"
                    aria-label="learning-progress"
                    aria-valuenow="50"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    <div class="progress-bar w-75"></div>
                  </div>
                  <small class="text-gray-700 text-end ms-1" style="width: 37px">75%</small>
                  <button class="btn btn-outline-primary d-flex align-items-center p-2 ms-4" type="button">
                    <span class="material-symbols-outlined"> edit_square </span>
                  </button>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="card rounded-4 bg-gray-0 border-gray-200">
              <div class="card-body">
                <h3 class="fs-m fw-normal d-flex align-items-center mb-4">
                  <span class="material-symbols-outlined text-gray-600 me-3"> live_tv </span>
                  <span class="lh-base text-dark text-truncate">TypeScript 中文基礎課程</span>
                </h3>
                <div class="d-flex align-items-center">
                  <div
                    class="progress flex-grow-1"
                    role="progressbar"
                    aria-label="learning-progress"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    <div class="progress-bar w-25"></div>
                  </div>
                  <small class="text-gray-700 text-end ms-1" style="width: 37px">25%</small>
                  <button class="btn btn-outline-primary d-flex align-items-center p-2 ms-4" type="button">
                    <span class="material-symbols-outlined"> edit_square </span>
                  </button>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="card rounded-4 bg-gray-0 border-gray-200">
              <div class="card-body">
                <h3 class="fs-m fw-normal d-flex align-items-center mb-4">
                  <span class="material-symbols-outlined text-gray-600 me-3"> music_video </span>
                  <span class="lh-base text-dark text-truncate"
                    >EP21｜QA 真的只是在找 Bug 嗎？帶你解鎖測試員的真實日常</span
                  >
                </h3>
                <div class="d-flex align-items-center">
                  <div
                    class="progress flex-grow-1"
                    role="progressbar"
                    aria-label="learning-progress"
                    aria-valuenow="0"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    <div class="progress-bar w-0"></div>
                  </div>
                  <small class="text-gray-700 text-end ms-1" style="width: 37px">0%</small>
                  <button class="btn btn-outline-primary d-flex align-items-center p-2 ms-4" type="button">
                    <span class="material-symbols-outlined"> edit_square </span>
                  </button>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="card rounded-4 bg-gray-0 border-gray-200">
              <div class="card-body">
                <h3 class="fs-m fw-normal d-flex align-items-center mb-4">
                  <span class="material-symbols-outlined text-gray-600 me-3"> music_video </span>
                  <span class="lh-base text-dark text-truncate"
                    >EP39｜第一次當 QA 測試員就上手！軟體新人也能輕鬆入門測試工作</span
                  >
                </h3>
                <div class="d-flex align-items-center">
                  <div
                    class="progress flex-grow-1"
                    role="progressbar"
                    aria-label="learning-progress"
                    aria-valuenow="100"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    <div class="progress-bar w-100"></div>
                  </div>
                  <small class="text-gray-700 text-end ms-1" style="width: 37px">100%</small>
                  <button class="btn btn-outline-primary d-flex align-items-center p-2 ms-4" type="button">
                    <span class="material-symbols-outlined"> edit_square </span>
                  </button>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </section>
      <section class="container py-14">
        <h2 class="fs-xl mb-8 pb-6 border-bottom border-gray-200">常用卡片盒</h2>
        <div id="card-box-swiper" class="swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide" style="width: 244px">
              <div class="card rounded-4 bg-gray-0 border-2 border-tag-success-bg">
                <div class="card-body">
                  <img class="mb-4 rounded-1" src="/assets/images/dashboard/card-box-cover-1.png" alt="CSS 基礎-封面" />
                  <h3 class="fs-m lh-base tracking-2 text-center">CSS 基礎</h3>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 244px">
              <div class="card rounded-4 bg-gray-0 border-2 border-tag-orange-bg">
                <div class="card-body">
                  <img
                    class="mb-4 rounded-1"
                    src="/assets/images/dashboard/card-box-cover-2.png"
                    alt="React 框架-封面"
                  />
                  <h3 class="fs-m lh-base tracking-2 text-center">React 框架</h3>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 244px">
              <div class="card rounded-4 bg-gray-0 border-2 border-secondary-300">
                <div class="card-body">
                  <img class="mb-4 rounded-1" src="/assets/images/dashboard/card-box-cover-3.png" alt="料理基礎-封面" />
                  <h3 class="fs-m lh-base tracking-2 text-center">料理基礎</h3>
                </div>
              </div>
            </div>
          </div>
          <div class="swiper-scrollbar scrollbar-primary mt-20"></div>
        </div>
      </section>
      <section class="container py-14">
        <h2 class="fs-xl mb-8 pb-6 border-bottom border-gray-200">最近新增卡片</h2>
        <div id="current-cards-swiper" class="swiper">
          <div class="swiper-wrapper" style="height: 626px">
            <div class="swiper-slide" style="width: 300px">
              <div class="card rounded-4 bg-gray-0 border-gray-200 mb-4">
                <div class="card-body">
                  <span class="badge badge-success lh-base mb-4">CSS 基礎</span>
                  <p>
                    常見單位（px, %, rem）<br />px：固定像素<br />
                    %：相對於父元素<br />
                    rem：相對於 root font size<br />
                    使用 rem 可以更靈活響應式。
                  </p>
                </div>
              </div>
              <div class="card rounded-4 bg-gray-0 border-gray-200">
                <div class="card-body">
                  <span class="badge badge-success lh-base mb-4">CSS 基礎</span>
                  <p>實用建議</p>
                  <ul class="mb-0">
                    <li>響應式設計：建議優先使用 rem + % + vw/vh 的組合</li>
                    <li>元件內縮放：用 em 可以讓文字隨父層等比縮放</li>
                    <li>精準控制：設計系統中仍可用 px 做細節調整</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 300px">
              <div class="card rounded-4 bg-gray-0 border-gray-200 mb-4">
                <div class="card-body">
                  <span class="badge badge-secondary lh-base mb-4">料理基礎</span>
                  <p>
                    和風醬汁：醬油 × 味醂 × 高湯<br />常見比例為：<br />1（醬油）：1（味醂）：2（高湯）
                    <br />可用於燉煮、壽喜燒、烏龍麵湯底 味醂帶甜味並增加照面光澤
                  </p>
                </div>
              </div>
              <div class="card rounded-4 bg-gray-0 border-gray-200">
                <div class="card-body">
                  <span class="badge badge-secondary lh-base mb-4">料理基礎</span>
                  <p>
                    黃金比例：醬油 × 糖 × 米酒<br />
                    適用於台式紅燒料理，常見比例為： 1（醬油）：1（糖）：1（米酒）<br />
                    醬油提鹹香<br />
                    糖增加焦化風味<br />
                    米酒去腥提味<br />
                    👉 也可加入少許水稀釋，適用於紅燒肉、紅燒豆腐等。
                  </p>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 300px">
              <div class="card rounded-4 bg-gray-0 border-gray-200">
                <div class="card-body">
                  <span class="badge badge-secondary lh-base mb-4">料理基礎</span>
                  <p>
                    麻婆豆腐食譜（2-3人份）<br /><br />
                    食材準備：<br />
                  </p>
                  <ul class="mb-0">
                    <li>嫩豆腐：1盒（約300g，建議用棉豆腐或北豆腐）</li>
                    <li>牛絞肉：100g（也可用豬絞肉代替） 蒜末：2瓣</li>
                    <li>薑末：1小匙 蔥花：適量（分開蔥白與蔥綠）</li>
                    <li>豆瓣醬：1.5 大匙（建議使用郫縣豆瓣醬，較為道地）</li>
                    <li>醬油：1 大匙</li>
                    <li>料酒：1 大匙</li>
                    <li>水：200ml</li>
                    <li>太白粉水：1大匙太白粉＋1大匙水混合</li>
                    <li>花椒粉：1/2 小匙（或花椒油）</li>
                    <li>辣椒粉或辣椒油：依個人口味添加</li>
                    <li>香油：少許</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 300px">
              <div class="card rounded-4 bg-gray-0 border-gray-200 mb-4">
                <div class="card-body">
                  <span class="badge badge-orange lh-base mb-4">React</span>
                  <p>props vs state<br />props 是由父元件傳入的資料<br />state 是元件內部的狀態，可被修改<br /></p>
                </div>
              </div>
              <div class="card rounded-4 bg-gray-0 border-gray-200">
                <div class="card-body">
                  <span class="badge badge-success lh-base mb-4">CSS 基礎</span>
                  <p>
                    Flexbox（彈性盒子）<br /><code>display: flex;</code>
                    是現代網頁常用的排版方式之一，能夠快速讓元素水平或垂直對齊。<br />
                  </p>
                  <pre class="mb-0 code-area"><code>.container {
  display: flex;
  justify-content: center; /* 主軸對齊 */
  align-items: center; /* 交叉軸對齊 */
}</code></pre>
                </div>
              </div>
            </div>
            <div class="swiper-slide" style="width: 300px">
              <div class="card rounded-4 bg-gray-0 border-gray-200 mb-4">
                <div class="card-body">
                  <span class="badge badge-success lh-base mb-4">CSS 基礎</span>
                  <p>
                    Box Model（盒模型）<br />CSS 的每個元素都像一個盒子，由以下幾個部分構成（由內而外）：
                    <code>[margin] [border] [padding] [content]</code><br />
                  </p>
                  <ul class="mb-0">
                    <li>區塊說明 <code>content</code>元素實際內容，如文字、圖片等</li>
                    <li><code>padding</code>內容與邊框之間的間距</li>
                    <li><code>border</code>元素的邊框</li>
                    <li><code>margin</code>元素與外部其他元素之間的距離</li>
                  </ul>
                </div>
              </div>
              <div class="card rounded-4 bg-gray-0 border-gray-200">
                <div class="card-body">
                  <span class="badge badge-orange lh-base mb-4">React</span>
                  <p>
                    useState — 狀態管理入門 用來宣告與更新元件內的狀態 const [count, setCount] = useState(0)<br />setCount(count
                    + 1)<br /><br />
                    每次 setCount 呼叫後元件會重新渲染。
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="swiper-scrollbar scrollbar-primary mt-6"></div>
        </div>
      </section>
    </main>
    <!-- 頁尾 -->
    <%- include('./layout/footer'); -%>

    <script type="module" src="../../main.js"></script>
    <script type="module">
      import Swiper from 'swiper';
      import 'swiper/css';
      import 'swiper/css/scrollbar';
      import { Scrollbar } from 'swiper/modules';

      // Swiper
      const swiper = new Swiper('#card-box-swiper', {
        modules: [Scrollbar],
        spaceBetween: 24,
        slidesPerView: 'auto',
        slidesOffsetBefore: 0, // 和容器 padding 搭配，避免開頭/結尾多出空白
        slidesOffsetAfter: 0,
        watchOverflow: true, // 總寬不足時不產生可滑動空白
        scrollbar: {
          el: '.swiper-scrollbar',
          draggable: true,
        },
      });

      const cardsSwiper = new Swiper('#current-cards-swiper', {
        modules: [Scrollbar],
        spaceBetween: 16,
        slidesPerView: 'auto',
        slidesOffsetBefore: 0, // 和容器 padding 搭配，避免開頭/結尾多出空白
        slidesOffsetAfter: 0,
        watchOverflow: true, // 總寬不足時不產生可滑動空白
        loopAdditionalSlides: 2, // 額外複製到左右兩側的 slide 數量，捲到邊界不會出現空隙或閃動
        scrollbar: {
          el: '.swiper-scrollbar',
          draggable: true,
        },
      });

      import { Chart } from 'chart.js/auto';

      const themeData = {
        labels: ['網頁切板', '料理基礎', 'JavaScrip'],
        datasets: [
          {
            label: '本週占比（%）',
            data: [70, 20, 10],
            backgroundColor: ['#6190D5', '#FF9E69', '#FED0A7'],
          },
        ],
      };

      const themePie = {
        type: 'pie',
        data: themeData,
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: false,
            },
          },
        },
      };

      const ctx = document.getElementById('themePie');
      new Chart(ctx, themePie);

      // const labels = Utils.months({ count: 12 });
      const spendTimeData = {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [
          {
            label: '學習時間',
            data: [55, 25, 80, 45, 120, 180, 75, 90, 60, 20, 45, 100],
            backgroundColor: '#6190D5',
            borderRadius: 16,
            borderSkipped: false,
            barThickness: 16,
          },
        ],
      };

      const customTicks = {
        id: 'customTicks',
        afterDraw(chart) {
          const { ctx, chartArea, scales } = chart;
          const yAxis = scales.y;
          ctx.save();
          ctx.textAlign = 'left';
          ctx.textBaseline = 'middle';
          ctx.fillStyle = '#2B2B2B';
          ctx.font = '12px sans-serif';

          yAxis.ticks.forEach((tick, i) => {
            const y = yAxis.getPixelForTick(i);
            ctx.fillText(tick.label, yAxis.left, y);
          });
          ctx.restore();
        },
      };
      // 需要補上：畫線
      const spendTimeBar = {
        type: 'bar',
        data: spendTimeData,
        options: {
          responsive: true,
          plugins: {
            legend: { display: false }, // 隱藏內建圖例
            tooltip: {
              callbacks: { label: (ctx) => `${ctx.dataset.label}: ${ctx.parsed.y} 分` },
            },
          },
          scales: {
            x: {
              grid: {
                display: false,
                drawBorder: true,
                borderColor: '#F3D7D7',
                borderWidth: 1,
                borderDash: [7, 7],
              },
              ticks: {
                color: '#2B2B2B',
                padding: 8,
              },
            },
            y: {
              suggestedMin: 0,
              suggestedMax: 200,
              grid: {
                color: '#F3D7D7',
                drawBorder: false, // 不畫 y 軸邊框線
                lineWidth: 1,
                borderDash: [7, 7], // 水平線虛線
                drawBorder: false,
                drawTicks: false,
              },
              ticks: {
                color: '#FCFCFC',
                padding: 8,
                stepSize: 50,
                precision: 0,
              },
            },
          },
        },
        plugins: [customTicks],
      };

      const timeCtx = document.getElementById('spendTimeBar');
      new Chart(timeCtx, spendTimeBar);
    </script>
  </body>
</html>
